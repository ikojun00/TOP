(()=>{var e={498:e=>{e.exports=e=>{const t={board:[],shipsLeft:!0,owner:e,lastShot:{hit:!1,location:!1}};0===t.board.length&&(()=>{for(let e=0;e<100;e+=1)t.board.push({ship:!1,beenHit:!1})})();const n=()=>{for(const e of t.board)if(!1!==e.ship&&!e.beenHit)return void(t.shipsLeft=!0);t.shipsLeft=!1};return{boardInfo:t,placeShip:(e,n)=>{if(e.isVertical)for(let o=0;o<e.length;o+=1)t.board[n+10*o].ship=e.id;else for(let o=0;o<e.length;o+=1)t.board[n+o].ship=e.id},receiveHit:e=>{t.board[e].beenHit=!0,t.board[e].ship&&(t.lastShot.hit=!0,t.lastShot.location=e),n()},allShipsSunk:n,clearBoard:()=>{for(let e=0;e<100;e+=1)t.board[e]={ship:!1,beenHit:!1}}}}},507:e=>{e.exports=e=>{const t={name:e,shots:[]},n=()=>{let e=o(100);for(;t.shots.includes(e);)e=o(100);return t.shots.push(e),e},o=e=>Math.floor(Math.random()*e);return{playerInfo:t,AI:e=>{if(e.hit){let r,l=[1,-1,10,-10];do{const t=o(l.length),a=l[t];if(r=e.location+a,l=l.slice(0,t).concat(l.slice(t+1)),0===l.length)return n()}while(t.shots.includes(r)||r>99||r<0);return t.shots.push(r),r}return n()},getRandMove:n,resetShots:()=>{t.shots.length=0},getRandomNum:o}}},643:e=>{e.exports=(e,t,n=!1,o=[])=>({id:e,length:t,isVertical:n,hits:o,hit:e=>{e<0||e>=t||o.includes(e)||o.push(e)},sunk:()=>t===o.length})}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,n),l.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};(()=>{"use strict";n.d(o,{ai:()=>b,jF:()=>f,AG:()=>E,Xo:()=>I,iO:()=>B,gY:()=>v,hM:()=>g,mO:()=>h,sP:()=>S});var e=n(498),t=n.n(e),r=n(643),l=n.n(r),a=n(507),d=n.n(a);function i(e){e.addEventListener("dragover",(t=>{t.preventDefault(),e.classList.add("dragover")})),e.addEventListener("drop",(t=>{const n="Vertical"===document.getElementById("verticalOrHorizontalButton").innerHTML,o={carrier:{ship:n?l()("USS Enterprise",5):l()("USS Enterprise",5,!0)},battleship:{ship:n?l()("Minneapolis",4):l()("Minneapolis",4,!0)},destroyer:{ship:n?l()("Anderson",3):l()("Anderson",3,!0)},submarine:{ship:n?l()("Nautilus",3):l()("Nautilus",3,!0)},patrolboat:{ship:n?l()("PT-20",2):l()("PT-20",2,!0)}},r=t.dataTransfer.getData("text/plain"),{ship:a}=o[r];if(!0===s(a,Number(t.target.dataset.coord),h.boardInfo.board)){if(h.placeShip(a,Number(t.target.dataset.coord)),a.isVertical)for(let t=0;t<a.length;t+=1)document.querySelector(`[data-coord = "${Number(e.dataset.coord)+10*t}"]`).style.backgroundColor="#8d99ae";else for(let t=0;t<a.length;t+=1)document.querySelector(`[data-coord = "${Number(e.dataset.coord)+t}"]`).style.backgroundColor="#8d99ae";const n=document.getElementById(r);m[(m.indexOf(n)+m.length+1)%m.length].style.display="flex",m[m.indexOf(n)+m.length%m.length].style.display="none",m.splice(m.indexOf(n),1),console.log(m),n.remove(),e.classList.remove("dragover"),0===m.length&&(document.getElementById("playButton").style.display="flex",document.getElementById("ships").style.display="none",document.getElementById("verticalOrHorizontal").style.display="none")}}))}function s(e,t,n){if(!0===e.isVertical){if(t+10*(e.length-1)>100)return!1;for(let o=0;o<e.length;o+=1)if(!1!==n[t+10*o].ship)return!1}else{if(!1!==e.isVertical)return-1;if(t%10>(t+e.length-1)%10)return!1;for(let o=0;o<e.length;o+=1)if(!1!==n[t+o].ship)return!1}return!0}function c(e){const t=l()("USS Enterprise",5,u()),n=l()("Minneapolis",4,u()),o=l()("Anderson",3,u()),r=l()("Nautilus",3,u()),a=l()("PT-20",2,u());if("ai"===e){const e=[I,E,B,S,v];for(let t=0;t<5;t+=1){const n=b.getRandomNum(100);!1===s(e[t],n,f.boardInfo.board)?t-=1:f.placeShip(e[t],n)}}else{if("human"!==e)return-1;{const e=[t,n,o,r,a];for(let t=0;t<5;t+=1){const n=g.getRandomNum(100);!1===s(e[t],n,h.boardInfo.board)?t-=1:h.placeShip(e[t],n)}}}}function u(){const e=g.getRandomNum(2);return 1!==e&&(0===e||-1)}function y(e){const t=document.getElementById(e);t.style.gridTemplateColumns="repeat(10, 1fr)",t.style.gridTemplateRows="repeat(10, 1fr)";for(let n=0;n<100;n+=1){const o=document.createElement("button");o.classList.add(`${e}-grid-element`),o.dataset.coord=n,i(o),!1!==h.boardInfo.board[n].ship&&"playerBoard"===e&&(o.style.backgroundColor="#8d99ae"),t.append(o)}}document.getElementById("playAgainButton").addEventListener("click",(()=>{window.location.reload(!0)})),document.getElementById("randomButton").addEventListener("click",(e=>{var t,n;t=g.playerInfo.name,h.clearBoard(),n=h.boardInfo.owner,document.getElementById(n).innerHTML="",c(t),y(h.boardInfo.owner),document.getElementById("playButton").style.display="flex",document.getElementById("ships").style.display="none",document.getElementById("verticalOrHorizontal").style.display="none",e.preventDefault()})),document.getElementById("verticalOrHorizontalButton").addEventListener("click",(e=>{"Vertical"===e.target.innerHTML?(document.querySelectorAll("#ship > *").forEach((e=>{e.style.flexDirection="column"})),e.target.innerHTML="Horizontal"):(document.querySelectorAll("#ship > *").forEach((e=>{e.style.flexDirection="row"})),e.target.innerHTML="Vertical"),e.preventDefault()}));const p=document.querySelector("#ship").querySelectorAll(":scope > *"),m=Array.from(p);p.forEach((e=>{e.addEventListener("dragstart",(e=>{e.dataTransfer.setData("text/plain",e.target.id)}))})),document.querySelectorAll(".cursors > button").forEach((e=>{let t,n;e.addEventListener("click",(()=>{t=m.find((e=>"flex"===e.style.display)),"left-cursor"===e.id?n=m[(m.indexOf(t)-1+m.length)%m.length]:"right-cursor"===e.id&&(n=m[(m.indexOf(t)+1)%m.length]),t.style.display="none",n.style.display="flex"}))})),document.getElementById("playButton").addEventListener("click",(e=>{y(f.boardInfo.owner),document.getElementById("enemySide").style.display="flex",document.getElementById("addShips").style.display="none",document.querySelectorAll(".enemyBoard-grid-element").forEach((e=>{e.addEventListener("click",(t=>{f.receiveHit(e.dataset.coord),!0===f.boardInfo.lastShot.hit&&f.boardInfo.lastShot.location===e.dataset.coord?e.style.backgroundColor="red":e.style.backgroundColor="lightgrey",!1===f.boardInfo.shipsLeft?(document.getElementById("endgame").style.display="flex",document.getElementById("winnerText").innerHTML="You win!",document.getElementById("playerSide").style.display="none",document.getElementById("enemySide").style.display="none"):function(){const e=document.querySelectorAll(".playerBoard-grid-element"),t=b.AI(h.boardInfo.lastShot);h.receiveHit(t),!0===h.boardInfo.lastShot.hit&&h.boardInfo.lastShot.location===t?e[t].style.backgroundColor="red":e[t].style.backgroundColor="lightgrey",!1===h.boardInfo.shipsLeft&&(document.getElementById("endgame").style.display="flex",document.getElementById("winnerText").innerHTML="AI wins!",document.getElementById("playerSide").style.display="none",document.getElementById("enemySide").style.display="none")}(),t.target.disabled=!0}))})),e.preventDefault()}));const h=t()("playerBoard"),f=t()("enemyBoard"),g=d()("human"),b=d()("ai"),I=l()("Akagi",5,u()),E=l()("Nagato",4,u()),B=l()("Murakumo",3,u()),S=l()("I-68",3,u()),v=l()("Shimakaze",2,u());c(b.playerInfo.name),y(h.boardInfo.owner)})()})();