(()=>{var e={498:e=>{e.exports=e=>{const t={board:[],shipsLeft:!0,owner:e,lastShot:{hit:!1,location:!1}};0===t.board.length&&(()=>{for(let e=0;e<100;e+=1)t.board.push({ship:!1,beenHit:!1})})();const n=()=>{for(const e of t.board)if(!1!==e.ship&&!e.beenHit)return void(t.shipsLeft=!0);t.shipsLeft=!1};return{boardInfo:t,placeShip:(e,n)=>{if(e.isVertical)for(let o=0;o<e.length;o+=1)t.board[n+10*o].ship=e.id;else for(let o=0;o<e.length;o+=1)t.board[n+o].ship=e.id},receiveHit:e=>{t.board[e].beenHit=!0,t.board[e].ship&&(t.lastShot.hit=!0,t.lastShot.location=e),n()},allShipsSunk:n,clearBoard:()=>{for(let e=0;e<100;e+=1)t.board[e]={ship:!1,beenHit:!1}}}}},507:e=>{e.exports=e=>{const t={name:e,shots:[]},n=()=>{let e=o(100);for(;t.shots.includes(e);)e=o(100);return t.shots.push(e),e},o=e=>Math.floor(Math.random()*e);return{playerInfo:t,AI:e=>{if(e.hit){let r,l=[1,-1,10,-10];do{const t=o(l.length),a=l[t];if(r=e.location+a,l=l.slice(0,t).concat(l.slice(t+1)),0===l.length)return n()}while(t.shots.includes(r)||r>99||r<0);return t.shots.push(r),r}return n()},getRandMove:n,resetShots:()=>{t.shots.length=0},getRandomNum:o}}},643:e=>{e.exports=(e,t,n=!1,o=[])=>({id:e,length:t,isVertical:n,hits:o,hit:e=>{e<0||e>=t||o.includes(e)||o.push(e)},sunk:()=>t===o.length})}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,n),l.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=n(498),t=n.n(e),o=n(643),r=n.n(o),l=n(507),a=n.n(l);function d(e){const t=document.getElementById(e);t.style.gridTemplateColumns="repeat(10, 1fr)",t.style.gridTemplateRows="repeat(10, 1fr)";for(let n=0;n<100;n+=1){const o=document.createElement("button");o.classList.add(`${e}-grid-element`),o.dataset.coord=n,o.addEventListener("dragover",(e=>{e.preventDefault(),o.classList.add("dragover")})),o.addEventListener("drop",(e=>{const t="Vertical"===document.getElementById("verticalOrHorizontalButton").innerHTML,n={carrier:{ship:t?r()("USS Enterprise",5):r()("USS Enterprise",5,!0),index:0},battleship:{ship:t?r()("Minneapolis",4):r()("Minneapolis",4,!0),index:1},destroyer:{ship:t?r()("Anderson",3):r()("Anderson",3,!0),index:2},submarine:{ship:t?r()("Nautilus",3):r()("Nautilus",3,!0),index:3},patrolboat:{ship:t?r()("PT-20",2):r()("PT-20",2,!0),index:4}},l=e.dataTransfer.getData("text/plain"),{ship:a,index:d}=n[l];if(console.log(a),!0===i(a,Number(e.target.dataset.coord),y.boardInfo.board)){if(y.placeShip(a,Number(e.target.dataset.coord)),a.isVertical)for(let e=0;e<a.length;e+=1)document.querySelector(`[data-coord = "${Number(o.dataset.coord)+10*e}"]`).style.backgroundColor="pink";else for(let e=0;e<a.length;e+=1)document.querySelector(`[data-coord = "${Number(o.dataset.coord)+e}"]`).style.backgroundColor="pink";u[(d+u.length+1)%u.length].style.display="flex",u[(d+u.length)%u.length].style.display="none";const t=document.getElementById(l);p.splice(p.indexOf(t),1),t.remove(),o.classList.remove("dragover"),0===p.length&&(document.getElementById("playButton").style.display="flex",document.getElementById("ships").style.display="none",document.getElementById("verticalOrHorizontal").style.display="none")}console.table(y.boardInfo.board)})),!1!==y.boardInfo.board[n].ship&&"playerBoard"===e&&(o.style.backgroundColor="pink"),t.append(o)}}function i(e,t,n){if(!0===e.isVertical){if(t+10*(e.length-1)>100)return!1;for(let o=0;o<e.length;o+=1)if(!1!==n[t+10*o].ship)return!1}else{if(!1!==e.isVertical)return-1;if(t%10>(t+e.length-1)%10)return!1;for(let o=0;o<e.length;o+=1)if(!1!==n[t+o].ship)return!1}return!0}function s(e){const t=r()("USS Enterprise",5,c()),n=r()("Minneapolis",4,c()),o=r()("Anderson",3,c()),l=r()("Nautilus",3,c()),a=r()("PT-20",2,c());if("ai"===e){const e=[g,b,I,E,B];for(let t=0;t<5;t+=1){const n=f.getRandomNum(100);!1===i(e[t],n,m.boardInfo.board)?t-=1:m.placeShip(e[t],n)}}else{if("human"!==e)return-1;{const e=[t,n,o,l,a];for(let t=0;t<5;t+=1){const n=h.getRandomNum(100);!1===i(e[t],n,y.boardInfo.board)?t-=1:y.placeShip(e[t],n)}}}}function c(){const e=h.getRandomNum(2);return 1!==e&&(0===e||-1)}document.getElementById("randomButton").addEventListener("click",(e=>{var t;t=h.playerInfo.name,y.clearBoard(),document.getElementById("playerBoard").innerHTML="",s(t),d("playerBoard"),document.getElementById("playButton").style.display="flex",document.getElementById("ships").style.display="none",document.getElementById("verticalOrHorizontal").style.display="none",e.preventDefault()})),document.getElementById("verticalOrHorizontalButton").addEventListener("click",(e=>{"Vertical"===e.target.innerHTML?(document.querySelectorAll("#ship > *").forEach((e=>{e.style.flexDirection="column"})),e.target.innerHTML="Horizontal"):(document.querySelectorAll("#ship > *").forEach((e=>{e.style.flexDirection="row"})),e.target.innerHTML="Vertical"),e.preventDefault()}));const u=document.querySelector("#ship").querySelectorAll(":scope > *"),p=Array.from(u);u.forEach((e=>{e.addEventListener("dragstart",(e=>{e.dataTransfer.setData("text/plain",e.target.id)}))})),document.querySelectorAll(".cursors > button").forEach((e=>{let t,n;e.addEventListener("click",(()=>{t=p.find((e=>"flex"===e.style.display)),"left-cursor"===e.id?n=p[(p.indexOf(t)-1+p.length)%p.length]:"right-cursor"===e.id&&(n=p[(p.indexOf(t)+1)%p.length]),t.style.display="none",n.style.display="flex"}))})),document.getElementById("playButton").addEventListener("click",(e=>{d("enemyBoard"),document.getElementById("enemySide").style.display="flex",document.getElementById("addShips").style.display="none",document.querySelectorAll(".enemyBoard-grid-element").forEach((e=>{e.addEventListener("click",(t=>{m.receiveHit(e.dataset.coord),!0===m.boardInfo.lastShot.hit&&m.boardInfo.lastShot.location===e.dataset.coord?e.style.backgroundColor="red":e.style.backgroundColor="lightgrey",!1===m.boardInfo.shipsLeft?(document.getElementById("endgame").style.display="flex",document.getElementById("winnerText").innerHTML="You win!",document.getElementById("playerSide").style.display="none",document.getElementById("enemySide").style.display="none"):function(){const e=document.querySelectorAll(".playerBoard-grid-element"),t=f.AI(y.boardInfo.lastShot);y.receiveHit(t),!0===y.boardInfo.lastShot.hit&&y.boardInfo.lastShot.location===t?e[t].style.backgroundColor="red":e[t].style.backgroundColor="lightgrey",!1===y.boardInfo.shipsLeft&&(document.getElementById("endgame").style.display="flex",document.getElementById("winnerText").innerHTML="AI wins!",document.getElementById("playerSide").style.display="none",document.getElementById("enemySide").style.display="none")}(),t.target.disabled=!0}))})),e.preventDefault()})),document.getElementById("playAgainButton").addEventListener("click",(()=>{window.location.reload(!0)}));const y=t()("human"),m=t()("ai"),h=a()("human"),f=a()("ai"),g=r()("Akagi",5,c()),b=r()("Nagato",4,c()),I=r()("Murakumo",3,c()),E=r()("I-68",3,c()),B=r()("Shimakaze",2,c());s(f.playerInfo.name),d("playerBoard")})()})();