(()=>{"use strict";function t(t){document.getElementById(t).style.display="grid",document.querySelectorAll(`.content >*:not(#${t})`).forEach((t=>t.style.display="none"))}function e(t){const e=document.getElementById("sidebar");document.getElementById(t).style.backgroundColor="#D4A373",document.getElementById(`${t}-button`).style.backgroundColor="#D4A373",e.querySelectorAll(`ul>*:not(#${t})`).forEach((t=>t.style.backgroundColor="#FAEDCD")),e.querySelectorAll(`li>*:not(#${t}-button)`).forEach((t=>t.style.backgroundColor="#FAEDCD"))}function n(t){document.getElementById(t).style.display="flex",document.getElementById("add-button").style.display="none",document.querySelectorAll(`body >*:not(#${t})`).forEach((t=>t.style.filter="blur(10px)"))}function o(t){document.getElementById(t).style.display="none",document.getElementById("add-button").style.display="flex",document.querySelectorAll("body >*").forEach((t=>t.style.filter="blur(0)"))}function c(t,e,n){const o=document.getElementById(n),c=document.createElement("div");c.classList.add("card"),c.innerHTML=`\n              <div class="card-text">\n                <button id='checkbox-button' data-checkbox-button=${e}></button>\n                <p>${t.title}</p>\n              </div>\n              <div class="card-options">\n                  <button id='details-button' data-details-button=${e}>Details</button>\n                  <p>${t.date}</p>\n                  <button id='remove-button' data-remove-button=${e}><img src="SVG/trash-can-outline.svg" alt="Trash"></button>\n              </div>`,o.appendChild(c)}function l(t){const e=document.querySelector(".notifications"),n=document.createElement("li");n.className="toast",n.innerHTML=`<div class="column">\n                         <span>${t}</span>\n                      </div>`,e.appendChild(n),setTimeout((()=>e.removeChild(e.firstChild)),5e3),console.log(e)}function d(t){const e=document.querySelectorAll(`[data-checkbox-button='${t}']`);!1===r[t].done?e.forEach((t=>{t.style.backgroundColor="white",t.nextElementSibling.style.textDecoration="none"})):e.forEach((t=>{t.style.backgroundColor="rgb(212, 163, 115)",t.nextElementSibling.style.textDecoration="line-through"}))}function a(t,e){(function(t){const e=new Date(t),n=new Date;return e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getYear()===n.getYear()})(t.date)&&c(t,e,"content-today"),function(t){const e=new Date(t),n=new Date,o=n.getDate(),c=n.getDay(),l=new Date(n.setDate(o-c-1)),d=new Date(l);return d.setDate(d.getDate()+7),e>=l&&e<=d}(t.date)&&c(t,e,"content-week"),c(t,e,"content-inbox"),function(t){document.querySelectorAll(`[data-checkbox-button='${t}']`).forEach((e=>e.addEventListener("click",(()=>{!0===r[t].done?r[t].done=!1:r[t].done=!0,d(t),localStorage.setItem("cards",JSON.stringify(r))})))),document.querySelectorAll(`[data-remove-button='${t}']`).forEach((e=>e.addEventListener("click",(()=>function(t){r.splice(t,1),l("ToDo removed"),localStorage.setItem("cards",JSON.stringify(r)),document.querySelectorAll(".card").forEach((t=>{t.remove()})),r.forEach(((t,e)=>a(t,e)))}(t))))),document.querySelectorAll(`[data-details-button='${t}']`).forEach((e=>e.addEventListener("click",(()=>function(t){document.getElementById("card-details-text").innerHTML=`\n                  <p>Title: ${r[t].title}</p>\n                  <p>Description: ${r[t].desc}</p>\n                  <p>Date: ${r[t].date}</p>\n                  <p>Priority: ${r[t].priority}</p>\n                  <button id='details-close-button'>Close</button>`,n("card-details-text"),document.getElementById("details-close-button").addEventListener("click",(()=>o("card-details-text")))}(t)))))}(e)}const r=[];document.querySelectorAll("button").forEach((c=>{c.addEventListener("click",(d=>{if("add-button"===c.id)n("myForm");else if("submit-button"===c.id){if(!0===function(){const t=document.forms.myForm.title.value,e=document.forms.myForm.date.value;return""!==t&&""!==e}()){const t=document.getElementById("myForm"),e=new FormData(t);d.preventDefault(),(t=>{const e={title:"",desc:"",priority:"",date:"",done:!1};for(const[n,o]of t)"title"===n?e.title=o:"desc"===n?e.desc=o:"priority"===n?e.priority=o:"date"===n?e.date=o:console.log("Error");r.push(e),localStorage.setItem("cards",JSON.stringify(r)),a(e,r.length-1)})(e),o("myForm"),l("ToDo added")}}else"inbox-button"===c.id?(t("content-inbox"),e("inbox")):"today-button"===c.id?(t("content-today"),e("today")):"week-button"===c.id&&(t("content-week"),e("week"))}))})),function(){let t=0;const e=localStorage.getItem("cards");e&&JSON.parse(e).forEach((e=>{r.push(e),a(e,t),d(t),t+=1}))}()})();